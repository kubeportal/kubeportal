{% extends 'admin/index.html' %}
{% load i18n admin_urls %}

{% block content %}

<div id="content-main">

{% if app_list %}

    {% for app in app_list %}
        <div class="app-{{ app.app_label }} module">
        <table>
        <caption>
            <a href="{{ app.app_url }}" class="section" title="{% blocktrans with name=app.name %}Models in the {{ name }} application{% endblocktrans %}">{{ app.name }}</a>
        </caption>

        <tr>
          <th scope="row"><a href="/admin/cleanup">Housekeeping</a></th>
          <td>&nbsp;</td>
          <td><a class="btn btn-primary viewlink" href="/admin/cleanup">{% trans 'Clean' %}</a></td>
        </tr>

        {% for model in app.models %}
            <tr class="model-{{ model.object_name|lower }}">
            {% if model.admin_url %}
                <th scope="row"><a href="{{ model.admin_url }}">{{ model.name }}</a></th>
            {% else %}
                <th scope="row">{{ model.name }}</th>
            {% endif %}

            {% if model.add_url %}
                <td><a href="{{ model.add_url }}" class="addlink">{% trans 'Add' %}</a></td>
            {% else %}
                <td>&nbsp;</td>
            {% endif %}

            {% if model.admin_url %}
                {% if model.view_only %}
                <td><a href="{{ model.admin_url }}" class="viewlink">{% trans 'View' %}</a></td>
                {% else %}
                <td><a href="{{ model.admin_url }}" class="changelink">{% trans 'Change' %}</a></td>
                {% endif %}
            {% else %}
                <td>&nbsp;</td>
            {% endif %}
            </tr>
        {% endfor %}
        </table>
        </div>
    {% endfor %}
{% else %}
    <p>{% trans "You don't have permission to view or edit anything." %}</p>
{% endif %}

<form action="{% url 'admin:sync'%}" method="POST">
{% csrf_token %}
<div class="submit-row"><input type="submit" value="Synchronize with Kubernetes"/></div>
</form>
</div>

{% endblock %}

